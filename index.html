<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO Meta Tags -->
    <title>radiomore.love - Music, Fashion & Chill | #LLL Online Radio</title>
    <meta name="description" content="Tune in to our online radio for the best mix of chill music and fashion-forward vibes. All music is royalty-free, making it ideal for public playback in shops, restaurants, cafes, and other commercial spaces without licensing fees. Your perfect soundtrack for a relaxed lifestyle. #LLL Radio." />
    <meta name="keywords" content="online radio, music, fashion, chill, LLL, radio stream, lifestyle music, chillout, internet radio, streaming, royalty-free music, copyright-free, public performance, no license fees, background music, shop music, restaurant music, in-store music, cafe music, commercial background music, business music" />
    <meta name="author" content="RadioHost" />
    <link rel="canonical" href="https://radiomore.love" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://radiomore.love" />
    <meta property="og:title" content="radiomore.love - Music, Fashion & Chill | #LLL Online Radio" />
    <meta property="og:description" content="Tune in to our online radio for the best mix of chill music and fashion-forward vibes. All music is royalty-free, making it ideal for public playback in shops, restaurants, cafes, and other commercial spaces without licensing fees. Your perfect soundtrack for a relaxed lifestyle. #LLL Radio." />
    <meta property="og:image" content="https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/logo.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://radiomore.love" />
    <meta property="twitter:title" content="radiomore.love - Music, Fashion & Chill | #LLL Online Radio" />
    <meta property="twitter:description" content="Tune in to our online radio for the best mix of chill music and fashion-forward vibes. All music is royalty-free, making it ideal for public playback in shops, restaurants, cafes, and other commercial spaces without licensing fees. Your perfect soundtrack for a relaxed lifestyle. #LLL Radio." />
    <meta property="twitter:image" content="https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/logo.png" />

    <!-- General -->
    <link rel="icon" href="https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/logo.png" />
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#000000" />

    <!-- iOS specific tags -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="radiomore.love" />
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/logo.png" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="overflow-hidden">
    <div id="root"></div>
    <script type="text/babel">
      const App = () => {
        const { useState, useEffect, useRef, useLayoutEffect } = React;
        const [isMenuOpen, setIsMenuOpen] = useState(false);
        const [isMounted, setIsMounted] = useState(false);
        const [tickerText, setTickerText] = useState('Loading latest updates...');
        const [isPopupOpen, setIsPopupOpen] = useState(false);
        const [popupTitle, setPopupTitle] = useState('');
        const [popupContent, setPopupContent] = useState('');
        const [popupIcon, setPopupIcon] = useState('');
        const [currentSlide, setCurrentSlide] = useState(0);
        const [photos, setPhotos] = useState([]);
        const [isSlideshowPlaying, setIsSlideshowPlaying] = useState(true);
        const [nowPlaying, setNowPlaying] = useState(null);
        const [isPlaying, setIsPlaying] = useState(false);
        
        const tickerContainerRef = useRef(null);
        const textRef = useRef(null);
        const popupContentRef = useRef(null);
        const autoCloseTimerRef = useRef(null);
        const menuClickIntentRef = useRef(false);
        const audioRef = useRef(null);
        const nowPlayingTimeoutRef = useRef(null);
        const videoRef = useRef(null);

        const logoUrl = 'https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/logo.png';
        const feedUrl = 'https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/feed.txt';
        const apiUrl = 'https://stream.radiohost.cloud/api/nowplaying/live';
        const streamAudioUrl = 'https://stream.radiohost.cloud/listen/live/radio.mp3';
        const backgroundVideoUrl = 'https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/background.mov';

        const menuItems = [
            { 
                name: 'Home', 
                icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>',
                contentUrl: 'https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/home.txt'
            },
            { 
                name: 'X', 
                icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" viewBox="0 0 24 24" fill="currentColor"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg>',
                content: `<div id="curator-feed-x-layout"><a href="https://curator.io" target="_blank" class="crt-logo crt-tag">Powered by Curator.io</a></div>`
            },
            {
                name: 'Facebook',
                icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
                content: `<div id="curator-feed-default-feed-layout"><a href="https://curator.io" target="_blank" class="crt-logo crt-tag">Powered by Curator.io</a></div>`
            },
            { 
                name: 'YouTube', 
                icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',
                content: `<div id="curator-feed-youtube-layout"><a href="https://curator.io" target="_blank" class="crt-logo crt-tag">Powered by Curator.io</a></div>`
            },
            { 
                name: 'Photos', 
                icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>',
                type: 'slideshow'
            },
            { 
                name: 'App', 
                icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>',
                contentUrl: 'https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/app.txt'
            },
            { 
                name: 'About Us', 
                icon: '<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',
                contentUrl: 'https://raw.githubusercontent.com/radiohost-cloud/radiomorelove/main/aboutus.txt'
            }
        ];
        
        const fetchNowPlaying = async () => {
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error(`NowPlaying API error! status: ${response.status}`);
                }
                const data = await response.json();
                setNowPlaying(data);

                const remaining = (data.now_playing.remaining || 0) * 1000;
                const delay = remaining > 0 ? remaining + 2000 : 15000;
                
                if (nowPlayingTimeoutRef.current) clearTimeout(nowPlayingTimeoutRef.current);
                nowPlayingTimeoutRef.current = setTimeout(fetchNowPlaying, delay);

            } catch (error) {
                console.error("Could not fetch Now Playing data:", error);
                if (nowPlayingTimeoutRef.current) clearTimeout(nowPlayingTimeoutRef.current);
                nowPlayingTimeoutRef.current = setTimeout(fetchNowPlaying, 30000);
            }
        };

        useEffect(() => {
          setIsMounted(true);
          
          const fetchPhotos = async () => {
              const repoUrl = 'https://api.github.com/repos/radiohost-cloud/radiomorelove/contents/photos';
              try {
                  const response = await fetch(repoUrl);
                  if (!response.ok) throw new Error(`GitHub API error! status: ${response.status}`);
                  const data = await response.json();
                  if (Array.isArray(data)) {
                      const imageUrls = data
                          .filter(item => item.type === 'file' && /\.(jpe?g|png|gif|webp|bmp|avif)$/i.test(item.name))
                          .map(item => item.download_url)
                          .sort(() => Math.random() - 0.5);
                      
                      if (imageUrls.length > 0) setPhotos(imageUrls);
                      else setPhotos(['https://placehold.co/1280x720/1a1a1a/ffffff/png?text=No+Images+Found']);
                  }
              } catch (error) {
                  console.error("Could not fetch photos:", error);
                  setPhotos(['https://placehold.co/1280x720/1a1a1a/ffffff/png?text=Error+Loading+Images']);
              }
          };

          fetchPhotos();
          fetchNowPlaying();

          const openTimer = setTimeout(() => {
            setIsMenuOpen(true);
            autoCloseTimerRef.current = setTimeout(() => setIsMenuOpen(false), 5000);
          }, 2000);

          return () => {
            clearTimeout(openTimer);
            if (autoCloseTimerRef.current) clearTimeout(autoCloseTimerRef.current);
            if (nowPlayingTimeoutRef.current) clearTimeout(nowPlayingTimeoutRef.current);
          };
        }, []);
        
        useEffect(() => {
            const handleContextMenu = (e) => e.preventDefault();
            const handleKeyDown = (e) => {
                if (
                    e.key === 'F12' ||
                    (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) ||
                    (e.metaKey && e.altKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) ||
                    (e.ctrlKey && e.key.toUpperCase() === 'U') ||
                    (e.metaKey && e.key.toUpperCase() === 'U')
                ) {
                    e.preventDefault();
                }
            };

            document.addEventListener('contextmenu', handleContextMenu);
            document.addEventListener('keydown', handleKeyDown);

            return () => {
                document.removeEventListener('contextmenu', handleContextMenu);
                document.removeEventListener('keydown', handleKeyDown);
            };
        }, []);

        useEffect(() => {
            const videoElement = videoRef.current;
            if (!videoElement) return;

            const intervalId = setInterval(() => {
                if (videoElement.paused) {
                    videoElement.play().catch(() => {});
                }
            }, 1000);

            videoElement.play().catch(() => {});

            return () => clearInterval(intervalId);
        }, []);

        useEffect(() => {
            let slideshowInterval = null;
            if (isSlideshowPlaying && photos.length > 0) {
                slideshowInterval = setInterval(() => {
                    setCurrentSlide(prevSlide => (prevSlide + 1) % photos.length);
                }, 10000);
            }
            return () => {
                if (slideshowInterval) clearInterval(slideshowInterval);
            };
        }, [photos.length, isSlideshowPlaying]);

        useEffect(() => {
          const fetchTickerText = async () => {
            try {
              const response = await fetch(feedUrl);
              if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
              const text = await response.text();
              setTickerText((text.trim() + '  •  ').repeat(10));
            } catch (error) {
              console.error("Could not fetch ticker text:", error);
              const fallbackText = 'Welcome to #LLL Radio 🎧  •  Your daily dose of chill beats 🎵, fashion 🕶️, and good vibes ✨  •  Tune in and relax 😌  •  ';
              setTickerText(fallbackText.repeat(10));
            }
          };
          fetchTickerText();
        }, []);

        useEffect(() => {
            const handleKeyDown = (event) => {
                if (event.key === 'Escape') setIsPopupOpen(false);
            };

            const SCRIPT_ID_FB = 'curator-io-script-fb', SCRIPT_ID_X = 'curator-io-script-x', SCRIPT_ID_YT = 'curator-io-script-yt';

            if (isPopupOpen) {
                window.addEventListener('keydown', handleKeyDown);

                const createScript = (id, src) => {
                    if (document.getElementById(id)) return;
                    const script = document.createElement('script');
                    script.id = id; script.src = src; script.async = true; script.charset = "UTF-8";
                    document.body.appendChild(script);
                };

                if (popupTitle === 'Facebook') createScript(SCRIPT_ID_FB, "https://cdn.curator.io/published/418676e0-0f7b-419c-bf7d-af9d1c7af09f.js");
                if (popupTitle === 'X') createScript(SCRIPT_ID_X, "https://cdn.curator.io/published/6e7130f2-a1be-47ef-98a0-766a31718031.js");
                if (popupTitle === 'YouTube') createScript(SCRIPT_ID_YT, "https://cdn.curator.io/published/e6d7c0c6-7137-40cf-8645-5d989129622c.js");
            }

            return () => {
                window.removeEventListener('keydown', handleKeyDown);
                [SCRIPT_ID_FB, SCRIPT_ID_X, SCRIPT_ID_YT].forEach(id => document.getElementById(id)?.remove());
            };
        }, [isPopupOpen, popupTitle]);
        
        const togglePlayPause = React.useCallback(() => {
            if (!audioRef.current) return;
            if (audioRef.current.paused) {
                audioRef.current.play().catch(e => console.error("Playback error:", e));
            } else {
                audioRef.current.pause();
            }
        }, []);

        useEffect(() => {
            if (!('mediaSession' in navigator)) {
                return;
            }

            if (nowPlaying) {
                const { song } = nowPlaying.now_playing;
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: song.title,
                    artist: song.artist,
                    album: 'radiomore.love',
                    artwork: [{ src: song.art }],
                });
            }
            
            navigator.mediaSession.setActionHandler('play', togglePlayPause);
            navigator.mediaSession.setActionHandler('pause', togglePlayPause);
            
            try {
                navigator.mediaSession.playbackState = isPlaying ? 'playing' : 'paused';
            } catch (error) {
                // Some browsers (like desktop Safari) throw an error here.
                console.warn('Could not set media session playback state.', error);
            }

        }, [nowPlaying, isPlaying, togglePlayPause]);

        useLayoutEffect(() => {
            if (tickerContainerRef.current && textRef.current) {
                const textWidth = textRef.current.offsetWidth;
                const pixelsPerSecond = 50;
                if (textWidth > 0 && pixelsPerSecond > 0) {
                    const duration = textWidth / pixelsPerSecond;
                    tickerContainerRef.current.style.animationDuration = `${duration}s`;
                }
            }
        }, [tickerText]);

        const toggleMenu = (e) => {
            e.stopPropagation();
            if (autoCloseTimerRef.current) {
              clearTimeout(autoCloseTimerRef.current);
              autoCloseTimerRef.current = null;
            }
            menuClickIntentRef.current = !isMenuOpen;
            setIsMenuOpen(!isMenuOpen);
        };

        const handleMenuItemClick = async (item) => {
            if (autoCloseTimerRef.current) {
              clearTimeout(autoCloseTimerRef.current);
              autoCloseTimerRef.current = null;
            }
            menuClickIntentRef.current = false;
        
            setPopupTitle(item.name);
            setPopupIcon(item.icon);
            setIsPopupOpen(true);
            setIsMenuOpen(false);
        
            if (item.type === 'slideshow') {
                setIsSlideshowPlaying(true);
                setPopupContent('');
            } else if (item.contentUrl) {
              setPopupContent('<p class="text-center text-gray-400">Loading...</p>');
              try {
                const response = await fetch(item.contentUrl);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const text = await response.text();
                
                const linkify = (line) => {
                    const urlPattern = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])|(\bwww\.[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
                    return line.replace(urlPattern, (url) => {
                        const fullUrl = url.startsWith('www.') ? `http://${url}` : url;
                        return `<a href="${fullUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline break-all">${url}</a>`;
                    });
                };

                let htmlContent = text.split('\n')
                                        .filter(line => line.trim() !== '')
                                        .map(line => `<p class="mb-2">${linkify(line)}</p>`)
                                        .join('');

                if (item.name === 'About Us') {
                    htmlContent += `<div class="border-t border-gray-700 pt-4 mt-4 text-center">
                        <p class="text-white/80 text-sm flex items-center justify-center">
                            <span>Music on air is AI-generated</span>
                            <a href="https://open.spotify.com/artist/41E9IlYbyBT0GaOwEYkGVM" target="_blank" rel="noopener noreferrer" class="text-[#1DB954] hover:text-[#1ED760] transition-colors ml-2 flex items-center justify-center" aria-label="Listen on Spotify">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 496 512"><path d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-2.1 3.9-6.3 5.1-10.2 2.9-33.3-19.3-74.5-23.7-124.5-12.9-4.3 .9-8.4-1.1-9.3-5.4s1.1-8.4 5.4-9.3c53.9-11.6 98.7-6.8 135.8 14.1 4.1 2.3 5.4 6.9 3.1 10.6zm13.5-44.5c-2.7 4.9-8.3 6.3-13.2 3.6-40.3-23.1-104.3-29.6-146.8-16.3-5.1 1.6-10.4-1.5-12-6.6s1.5-10.4 6.6-12c48.1-14.6 117.8-7.5 163.4 18.4 4.9 2.8 6.3 8.8 3.5 13.5zm.1-49.7c-3.2 5.9-9.8 7.8-15.7 4.6-45.4-26.4-121.2-32.2-169.4-17.8-6.1 1.8-12.2-1.8-14-7.9s1.8-12.2 7.9-14c53.6-15.8 135.8-9.5 187.1 19.8 5.9 3.2 7.8 9.9 4.6 15.8z"/></svg>
                            </a>
                        </p>
                    </div>`;
                }
                setPopupContent(htmlContent || '<p>No content available.</p>');
              } catch (error) {
                console.error("Could not fetch content:", error);
                setPopupContent('<p class="text-center text-red-500">Could not load content. Please try again later.</p>');
              }
            } else {
              setPopupContent(item.content);
            }
        };

        const menuItemsToRender = menuItems.sort((a, b) => {
          const order = ['Home', 'X', 'Facebook', 'YouTube', 'Photos', 'App', 'About Us'];
          return order.indexOf(a.name) - order.indexOf(b.name);
        });

        const nextSlide = () => photos.length > 0 && setCurrentSlide(prev => (prev + 1) % photos.length);
        const prevSlide = () => photos.length > 0 && setCurrentSlide(prev => (prev - 1 + photos.length) % photos.length);

        return (
          <div className="relative w-screen h-screen bg-black overflow-hidden" onClick={() => {
            if (isMenuOpen) {
              if (autoCloseTimerRef.current) clearTimeout(autoCloseTimerRef.current);
              autoCloseTimerRef.current = null;
              menuClickIntentRef.current = false;
              setIsMenuOpen(false);
            }
          }}>
            <video 
              ref={videoRef}
              autoPlay 
              loop 
              muted 
              playsInline
              className="absolute top-0 left-0 w-full h-full object-cover"
              src={backgroundVideoUrl}
            ></video>
            
            <div className="absolute inset-0 bg-black/50"></div>

            <header 
                className="absolute top-4 left-4 right-4 h-16 bg-black/80 backdrop-blur-sm rounded-full flex items-center z-40 shadow-lg"
                onMouseEnter={() => {
                    if (window.innerWidth >= 768) {
                        if (autoCloseTimerRef.current) clearTimeout(autoCloseTimerRef.current);
                        autoCloseTimerRef.current = null;
                        setIsMenuOpen(true);
                    }
                }}
                onMouseLeave={() => {
                    if (window.innerWidth >= 768 && !menuClickIntentRef.current) setIsMenuOpen(false);
                }}
            >
                <div className="flex-shrink-0 w-16 h-16 z-20">
                    <button onClick={toggleMenu} className="relative w-16 h-16 rounded-full p-0 border-0 bg-transparent cursor-pointer" aria-label="Toggle navigation menu" aria-haspopup="true" aria-expanded={isMenuOpen}>
                        <img src={logoUrl} alt="RadioHost Logo" className={`w-full h-full rounded-full object-cover transition-transform duration-300 hover:scale-110 ${isPlaying ? 'logo-spinning' : ''}`} />
                    </button>
                </div>

                <div className="flex-grow h-full relative overflow-hidden">
                    <div ref={tickerContainerRef} className="absolute top-0 left-0 h-full flex items-center animate-marquee">
                        <p ref={textRef} className="text-gray-200 text-lg whitespace-nowrap px-8">{tickerText}</p>
                        <p className="text-gray-200 text-lg whitespace-nowrap px-8" aria-hidden="true">{tickerText}</p>
                    </div>
                </div>

                <nav onClick={(e) => e.stopPropagation()} aria-label="Main navigation" className={`absolute ${isMenuOpen ? 'pointer-events-auto opacity-100' : 'pointer-events-none opacity-0'} ${isMounted ? 'transition-opacity duration-300' : ''} md:opacity-100 md:pointer-events-auto top-0 left-0 w-full h-full rounded-full bg-black/90 backdrop-blur-sm z-10 md:top-full md:left-0 md:w-16 md:h-auto md:bg-transparent md:backdrop-blur-none md:z-auto md:mt-2 md:rounded-lg`}>
                    <ul className="list-none m-0 p-0 h-full flex flex-row items-center pl-20 md:pl-0 md:flex-col md:items-center md:gap-2 md:h-auto">
                        {menuItemsToRender.map((item, index) => (
                            <li key={item.name}>
                                <button
                                    onClick={() => handleMenuItemClick(item)}
                                    className={`w-12 h-12 md:w-16 md:h-16 bg-black text-white rounded-full flex items-center justify-center md:shadow-lg hover:bg-white hover:text-black focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-gray-400 ${isMounted ? 'transition-all duration-300 ease-out' : ''} ${isMenuOpen ? 'opacity-100 translate-x-0 md:translate-y-0' : 'opacity-0 -translate-x-4 md:-translate-y-4'}`}
                                    style={{ transitionDelay: isMenuOpen ? `${index * 60}ms` : '0ms' }}
                                    tabIndex={isMenuOpen ? 0 : -1}
                                    aria-label={item.name}
                                    dangerouslySetInnerHTML={{ __html: item.icon }}
                                ></button>
                            </li>
                        ))}
                    </ul>
                </nav>
            </header>
            
            <audio ref={audioRef} src={streamAudioUrl} preload="auto" onPlay={() => setIsPlaying(true)} onPause={() => setIsPlaying(false)}></audio>
            
            {nowPlaying && (
              <div className="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[90%] max-w-xs bg-black/70 backdrop-blur-lg rounded-3xl shadow-2xl p-6 flex flex-col items-center gap-4 z-30 animate-fade-in-up text-center">
                <img 
                  src={nowPlaying.now_playing.song.art} 
                  alt={nowPlaying.now_playing.song.album} 
                  className="w-56 h-56 rounded-2xl object-cover shadow-lg"
                />
                <div className="w-full overflow-hidden mt-2">
                  <p className="text-white text-xl font-bold truncate">{nowPlaying.now_playing.song.title}</p>
                  <p className="text-gray-300 text-base mt-1 truncate">{nowPlaying.now_playing.song.artist}</p>
                </div>
                <button 
                  onClick={togglePlayPause} 
                  className="w-16 h-16 mt-2 bg-white/20 text-white rounded-full flex items-center justify-center hover:bg-white/30 transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-white/50"
                  aria-label={isPlaying ? "Pause" : "Play"}
                >
                  {isPlaying ? (
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                  ) : (
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                  )}
                </button>
              </div>
            )}

            {isPopupOpen && (
              <div 
                  className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in"
                  onClick={() => setIsPopupOpen(false)}
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="popup-title"
              >
                  <div 
                      className={`bg-black/80 rounded-2xl shadow-2xl p-6 w-full m-4 text-white relative animate-scale-in flex flex-col ${popupTitle === 'Photos' ? 'max-w-5xl' : (popupTitle === 'Facebook' || popupTitle === 'X' || popupTitle === 'YouTube' ? 'max-w-lg' : 'max-w-md')}`}
                      onClick={(e) => e.stopPropagation()}
                  >
                      <button onClick={() => setIsPopupOpen(false)} className="absolute top-3 right-3 text-gray-400 hover:text-white transition-colors z-10" aria-label="Close popup">
                          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                      </button>
                      <h2 id="popup-title" className="font-bold mb-4" dangerouslySetInnerHTML={{ __html: popupIcon }}></h2>
                      
                        {popupTitle === 'Photos' ? (
                            <div className="relative aspect-video overflow-hidden rounded-lg bg-black">
                                {photos.length > 0 ? photos.map((photo, index) => (
                                    <img
                                        key={index}
                                        src={photo}
                                        alt={`Slide ${index + 1}`}
                                        className={`absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ease-in-out ${index === currentSlide ? 'opacity-100' : 'opacity-0'}`}
                                    />
                                )) : (
                                    <div className="w-full h-full flex items-center justify-center bg-gray-800">
                                        <p>Loading photos...</p>
                                    </div>
                                )}
                                <div className="absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent flex items-center justify-between">
                                    <div className="text-xs text-gray-300">
                                        <span>Photos from: </span>
                                        <a href="https://www.facebook.com/ksztaltzmyslow" target="_blank" rel="noopener noreferrer" className="underline hover:text-white">facebook.com/ksztaltzmyslow</a>
                                    </div>
                                    <div className="flex items-center gap-2 text-white">
                                        <button onClick={prevSlide} aria-label="Previous slide" className="p-2 rounded-full hover:bg-white/20 transition-colors">
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                                        </button>
                                        <button onClick={() => setIsSlideshowPlaying(!isSlideshowPlaying)} aria-label={isSlideshowPlaying ? 'Pause slideshow' : 'Play slideshow'} className="p-2 rounded-full hover:bg-white/20 transition-colors">
                                            {isSlideshowPlaying ? (
                                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                                            ) : (
                                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                            )}
                                        </button>
                                        <button onClick={nextSlide} aria-label="Next slide" className="p-2 rounded-full hover:bg-white/20 transition-colors">
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div ref={popupContentRef} className="text-gray-300 space-y-3 max-h-[60vh] overflow-y-auto pr-2" dangerouslySetInnerHTML={{ __html: popupContent }}></div>
                        )}
                  </div>
              </div>
            )}
            
            <div className="absolute bottom-4 right-4 z-20">
              <elevenlabs-convai agent-id="agent_01jzk1yswsenmr9h8h60ybk8xf"></elevenlabs-convai>
            </div>
          </div>
        );
      };

      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }

      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
    <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>
    <style>
        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translate(-50%, calc(-50% + 20px));
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
        .fixed.top-1\/2.left-1\/2.-translate-x-1\/2.-translate-y-1\/2.animate-fade-in-up {
            transform: translate(-50%, -50%);
            animation: fade-in-up 0.5s ease-out forwards;
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .animate-marquee {
            animation: marquee 60s linear infinite;
        }

        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
        }

        @keyframes scale-in {
            from { 
                opacity: 0;
                transform: scale(0.95);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }
        .animate-scale-in {
            animation: scale-in 0.3s ease-out forwards;
        }
        
        @keyframes fade-in-long {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in-long {
            animation: fade-in-long 1.5s ease-in-out forwards;
        }

        @keyframes fade-out-long {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .animate-fade-out-long {
            animation: fade-out-long 1.5s ease-in-out forwards;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .logo-spinning {
            animation: spin 8s linear infinite;
        }
    </style>
  </body>
</html>
